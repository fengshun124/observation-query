Request information and files via Python scripts.


## About STARALT

> Staralt is a program that shows the observability of objects in various ways: either you can plot altitude against time for a particular night (*Staralt*), or plot the path of your objects across the sky for a particular night (*Startrack*), or plot how altitude changes over a year (*Starobs*), or get a table with the best observing date for each object (*Starmult*).

For more details please refer to [the help page](http://catserver.ing.iac.es/staralt/staralt_help.html) of STARALT.

---

## About the scripts

The scripts were firstly developed for requesting staralt output gif from the website.
Yet due to the expanding needs, more website may be supported in the future.
Some of these scripts support accessing TAP (Table Access Protocol) service via Python.

The STARALT request is generated by `staralt.py`. 
Theoretically, the script allows requests to be made identically to the web page.
Yet some values are set to default (e.g. the observatory name) to fit my own need. 
Please modify the script accordingly to suit whatever needs. 
`query_staralt.py` provides an instant that requests visibility for a table of cluster stars.

The CFHT request is generated by `cfht.py`.
Instead of sending forms, it sends only a simple request, and get text file response.
The script is designed to return the desired value, but it cannot handle exception value 
(likes `WARNING: ETC finds an exposure time iTexp=0.0 shorter than min applicable texp=11s. Exiting.)` 
More work are pending and improvement may be made in the future.

The TAP service query is implemented in `tap_service.py`, 
along with a class `ClusterCoord` which generate the galactic Cartesian coordinates with the given information 
and check their validility.
Currently, the script only support selecting spherical area.
But the adql query can be easily modified to conduct filtering.

*NOTICE* that the data retrieved contains some columns in `numpy.object_` format, which seems not compatible with `astropy.table.Table.write` as it cannot be normally saved.
Hence, the method `query_gaia.fix_data_type` is introduced.
It converts those `numpy.object_` into `str`, which is acceptable by astropy. 
A special treat for column `phot_variable_flag`, which will be converted to `bool` instead of `str` (I refer to [this issue](https://github.com/astropy/astropy/issues/5258) for this special case). 
Please let me known if you have better solution.


Future ToDo ~~üê¶~~

- date validation (to avoid absurd dates like Feb. 30th)

- perform requests with preset configuration (maybe a JSON file or anything similar)

- ! fix exception response handling

- 3D scatter plot, Proper motion plot for the downloaded fits files.